<%# locals: (title:, source:, description: nil, content: nil) %>
<div class="border border-zinc-200 dark:border-zinc-800 rounded-xl overflow-hidden bg-white dark:bg-zinc-900" data-controller="styleguide-code">
  <%# Header with tabs %>
  <div class="flex items-center justify-between px-4 py-2.5 border-b border-zinc-200 dark:border-zinc-800 bg-zinc-50 dark:bg-zinc-900/50">
    <div class="flex items-center gap-3">
      <h3 class="text-sm font-semibold text-zinc-700 dark:text-zinc-300"><%= title %></h3>
      <% if description.present? %>
        <span class="text-xs text-zinc-400 dark:text-zinc-500 hidden sm:inline"><%= description %></span>
      <% end %>
    </div>
    <div class="flex items-center gap-1">
      <button
        data-styleguide-code-target="previewTab"
        data-action="click->styleguide-code#showPreview"
        class="px-2.5 py-1 text-xs font-medium rounded-md transition-colors bg-zinc-200 dark:bg-zinc-700 text-zinc-900 dark:text-white">
        Preview
      </button>
      <button
        data-styleguide-code-target="codeTab"
        data-action="click->styleguide-code#showCode"
        class="px-2.5 py-1 text-xs font-medium rounded-md transition-colors text-zinc-500 dark:text-zinc-400 hover:bg-zinc-100 dark:hover:bg-zinc-800">
        Code
      </button>
      <button
        data-action="click->styleguide-code#copy"
        data-styleguide-code-target="copyButton"
        class="ml-1 p-1.5 text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-300 rounded-md hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors"
        title="Copy code">
        <%= eden_icon("clipboard", size: :sm) %>
      </button>
    </div>
  </div>

  <%# Preview panel %>
  <div data-styleguide-code-target="preview" class="p-6 bg-white dark:bg-zinc-950">
    <div class="flex flex-wrap items-start gap-4">
      <%= content %>
    </div>
  </div>

  <%# Code panel (hidden by default) %>
  <div data-styleguide-code-target="code" class="hidden">
    <pre class="code-block p-4 text-sm leading-relaxed bg-zinc-950 text-zinc-300 overflow-x-auto"><code data-styleguide-code-target="source"><%= styleguide_highlight_ruby(source) %></code></pre>
  </div>
</div>
