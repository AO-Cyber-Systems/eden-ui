<%
  label ||= nil
  value ||= nil
  change ||= nil
  trend ||= nil
  icon ||= nil
  variant ||= :default
  html_options ||= {}
  content ||= nil

  border_class = case variant.to_sym
  when :primary then "border-l-4 border-l-blue-500"
  when :success then "border-l-4 border-l-green-500"
  when :warning then "border-l-4 border-l-yellow-500"
  when :danger  then "border-l-4 border-l-red-500"
  else ""
  end

  trend_color = case trend.to_s
  when "up"   then "text-green-500 dark:text-green-400"
  when "down" then "text-red-500 dark:text-red-400"
  else "text-gray-500 dark:text-gray-400"
  end

  classes = [
    "bg-white dark:bg-gray-800 rounded-lg shadow p-5",
    border_class,
    html_options.delete(:class)
  ].compact_blank.join(" ")
%>

<div class="<%= classes %>" <%= tag.attributes(html_options) %>>
  <div class="flex items-center justify-between">
    <div>
      <% if label %>
        <p class="text-sm font-medium text-gray-500 dark:text-gray-400"><%= label %></p>
      <% end %>
      <% if value %>
        <p class="mt-1 text-2xl font-bold text-gray-900 dark:text-white"><%= value %></p>
      <% end %>
    </div>
    <% if icon %>
      <div class="flex items-center justify-center w-10 h-10 rounded-full bg-blue-100 dark:bg-blue-900">
        <%= eden_icon(icon, size: :md) %>
      </div>
    <% end %>
  </div>
  <% if change %>
    <div class="flex items-center mt-3 text-sm <%= trend_color %>">
      <% if trend.to_s == "up" %>
        <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M5.293 9.707a1 1 0 010-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 01-1.414 1.414L11 7.414V15a1 1 0 11-2 0V7.414L6.707 9.707a1 1 0 01-1.414 0z" clip-rule="evenodd"/></svg>
      <% elsif trend.to_s == "down" %>
        <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M14.707 10.293a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 111.414-1.414L9 12.586V5a1 1 0 012 0v7.586l2.293-2.293a1 1 0 011.414 0z" clip-rule="evenodd"/></svg>
      <% end %>
      <span><%= change %></span>
    </div>
  <% end %>
  <%= content %>
</div>
