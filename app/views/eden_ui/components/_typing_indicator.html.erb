<%
  sender ||= nil
  avatar ||= nil
  html_options ||= {}

  classes = [
    "flex items-start gap-2.5",
    html_options.delete(:class)
  ].compact_blank.join(" ")
%>

<div class="<%= classes %>" <%= tag.attributes(html_options) %>>
  <% if avatar %>
    <img class="w-8 h-8 rounded-full" src="<%= avatar %>" alt="<%= sender %>">
  <% end %>
  <div class="flex flex-col w-full max-w-[320px] leading-1.5 p-4 bg-gray-100 dark:bg-gray-700 rounded-e-xl rounded-es-xl">
    <% if sender %>
      <span class="text-sm font-semibold text-gray-900 dark:text-white mb-1"><%= sender %></span>
    <% end %>
    <div class="flex items-center gap-1">
      <span class="w-2 h-2 rounded-full bg-gray-400 dark:bg-gray-500 animate-bounce" style="animation-delay: 0ms"></span>
      <span class="w-2 h-2 rounded-full bg-gray-400 dark:bg-gray-500 animate-bounce" style="animation-delay: 150ms"></span>
      <span class="w-2 h-2 rounded-full bg-gray-400 dark:bg-gray-500 animate-bounce" style="animation-delay: 300ms"></span>
    </div>
  </div>
</div>
