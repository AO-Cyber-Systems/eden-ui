<%
  title ||= nil
  description ||= nil
  collapsible ||= false
  html_options ||= {}
  content ||= nil

  classes = [
    "bg-white dark:bg-gray-800 rounded-lg shadow p-6",
    html_options.delete(:class)
  ].compact_blank.join(" ")
%>

<div class="<%= classes %>" <%= tag.attributes(html_options) %>>
  <% if collapsible %>
    <button type="button" class="flex items-center justify-between w-full text-left" data-collapse-toggle="settings-<%= title.to_s.parameterize %>">
      <div>
        <% if title %>
          <h3 class="text-lg font-semibold text-gray-900 dark:text-white"><%= title %></h3>
        <% end %>
        <% if description %>
          <p class="mt-1 text-sm text-gray-500 dark:text-gray-400"><%= description %></p>
        <% end %>
      </div>
      <svg class="w-5 h-5 text-gray-500 dark:text-gray-400 shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m19 9-7 7-7-7"/></svg>
    </button>
    <div id="settings-<%= title.to_s.parameterize %>">
      <hr class="my-4 border-gray-200 dark:border-gray-700">
      <%= content %>
    </div>
  <% else %>
    <% if title %>
      <h3 class="text-lg font-semibold text-gray-900 dark:text-white"><%= title %></h3>
    <% end %>
    <% if description %>
      <p class="mt-1 text-sm text-gray-500 dark:text-gray-400"><%= description %></p>
    <% end %>
    <hr class="my-4 border-gray-200 dark:border-gray-700">
    <%= content %>
  <% end %>
</div>
