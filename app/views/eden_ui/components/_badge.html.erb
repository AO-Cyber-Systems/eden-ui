<%
  variant ||= :primary
  size ||= :md
  pill ||= false
  href ||= nil
  icon ||= nil
  dismissible ||= false
  html_options ||= {}
  text ||= nil
  content ||= text

  size_classes = case size.to_sym
  when :xs then "text-xs px-1.5 py-0.5"
  when :sm then "text-xs px-2 py-0.5"
  else "text-sm px-2.5 py-0.5"
  end

  variant_classes = case variant.to_sym
  when :success
    "bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300"
  when :warning
    "bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300"
  when :danger
    "bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300"
  when :info
    "bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300"
  when :neutral
    "bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"
  when :indigo
    "bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-300"
  when :purple
    "bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300"
  when :pink
    "bg-pink-100 text-pink-800 dark:bg-pink-900 dark:text-pink-300"
  else
    "bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300"
  end

  rounded = pill ? "rounded-full" : "rounded"
  base_classes = "inline-flex items-center font-medium"
  classes = [base_classes, size_classes, variant_classes, rounded, html_options.delete(:class)].compact_blank.join(" ")
%>

<% if href %>
  <a href="<%= href %>" class="<%= classes %>" <%= tag.attributes(html_options) %>><%= content %></a>
<% else %>
  <span class="<%= classes %>" <%= tag.attributes(html_options) %>>
    <%= content %>
    <% if dismissible %>
      <button type="button" class="inline-flex items-center p-1 ms-2 text-sm bg-transparent rounded-sm hover:bg-blue-200 hover:text-blue-900 dark:hover:bg-blue-800 dark:hover:text-blue-300" aria-label="Remove">
        <svg class="w-2 h-2" fill="currentColor" viewBox="0 0 20 20"><path d="M14.348 14.849a1.2 1.2 0 0 1-1.697 0L10 11.819l-2.651 3.029a1.2 1.2 0 1 1-1.697-1.697l2.758-3.15-2.759-3.152a1.2 1.2 0 1 1 1.697-1.697L10 8.183l2.651-3.031a1.2 1.2 0 1 1 1.697 1.697l-2.758 3.152 2.758 3.15a1.2 1.2 0 0 1 0 1.698z"/></svg>
      </button>
    <% end %>
  </span>
<% end %>
